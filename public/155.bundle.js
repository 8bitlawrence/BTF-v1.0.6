(self.webpackChunkbtf_v1_0_6=self.webpackChunkbtf_v1_0_6||[]).push([[155],{155:()=>{const t=document.getElementById("activeEffects"),e=document.getElementById("brewedPotions"),n=document.getElementById("purchasedItems"),i=document.getElementById("petDetailModal"),s=document.getElementById("closePetDetail"),o=document.getElementById("petDetailName"),a=document.getElementById("enchantList");function c(t,e){const n=PETS.find(t=>t.id===e);if(!n)return;o.textContent=n.name;const s=state.petEnchantments[t]||[];a.innerHTML="",0===s.length?a.innerHTML='<p style="color:var(--muted);font-size:13px">No enchantments yet. Visit the Enchanting page to add enchantments!</p>':s.forEach(t=>{const e=ENCHANTMENTS.find(e=>e.id===t);if(e){const t=document.createElement("div");t.className=`enchant-badge enchant-tier-${e.tier}`,t.innerHTML=`<div style="font-weight:700">${e.name}</div><div style="font-size:11px;opacity:0.9">${e.description}</div>`,a.appendChild(t)}}),i.classList.add("show")}function d(){i.classList.remove("show")}function l(){if(coinsEl.textContent=state.coins,luckMultiplierEl){const t=state.potionActive&&state.potionEndsAt>Date.now(),e=Math.min(state.luckStacks,100);luckMultiplierEl.textContent=t?1+2*e+"x":"1x"}if(t.innerHTML="",state.potionActive&&state.potionEndsAt>Date.now()){const e=Math.ceil((state.potionEndsAt-Date.now())/1e3),n=Math.floor(e/60),i=e%60,s=Math.min(state.luckStacks,100),o=document.createElement("div");o.className="item-card",o.innerHTML=`\n            <div class="item-icon">üß™</div>\n            <div class="item-info">\n                <h3>Luck Potion</h3>\n                <p class="effect-active">Active - ${n}:${i.toString().padStart(2,"0")} remaining</p>\n                <p>+${2*s}x luck boost (${s} stack${1!==s?"s":""})</p>\n            </div>\n        `,t.appendChild(o)}else t.innerHTML='<p style="color:var(--muted)">No active effects</p>';if(e){e.innerHTML="";const t=Array.isArray(state.potionInventory)?state.potionInventory:[];0===t.length?e.innerHTML='<p style="color:var(--muted)">No brewed potions. Visit the Shop to brew potions!</p>':t.forEach((t,n)=>{const i=document.createElement("div");i.className="item-card",i.style.position="relative",i.innerHTML=`\n                    <div class="item-icon">üß™</div>\n                    <div class="item-info">\n                        <h3>${t.name}</h3>\n                        <p style="color:#10b981">+${t.potency} luck stacks</p>\n                        <p style="font-size:12px">Duration: ${Math.round(t.durationMs/6e4)} minutes</p>\n                    </div>\n                `;const s=document.createElement("button");s.className="buy-btn",s.textContent="Use",s.style.marginLeft="auto",s.addEventListener("click",()=>useBrewedPotion(n)),i.appendChild(s),e.appendChild(i)})}n.innerHTML="";const i=Object.entries(state.inventory||{});i.length>0&&i.forEach(([t,e])=>{const i=PETS.find(e=>e.id===t);if(i)for(let s=0;s<e;s++){const e=`${t}_${s}`,o=state.petEnchantments[e]||[],a=document.createElement("div");a.className="item-card",a.style.cursor="pointer",a.innerHTML=`\n                    <div class="item-icon">üêæ</div>\n                    <div class="item-info">\n                        <h3>${i.name}</h3>\n                        <p style="color:var(--${i.rarity})">${i.rarity.toUpperCase()}</p>\n                        <p style="font-size:11px;margin-top:4px">${o.length} enchantment${1!==o.length?"s":""} ‚Ä¢ Click to view</p>\n                    </div>\n                `,a.addEventListener("click",()=>c(e,t)),n.appendChild(a)}}),state.purchasedItems&&state.purchasedItems.length>0&&state.purchasedItems.forEach(t=>{const e=document.createElement("div");e.className="item-card",e.innerHTML=`\n                <div class="item-icon">${t.icon}</div>\n                <div class="item-info">\n                    <h3>${t.name}</h3>\n                    <p>${t.description}</p>\n                </div>\n            `,n.appendChild(e)}),0!==i.length||state.purchasedItems&&0!==state.purchasedItems.length||(n.innerHTML='<p style="color:var(--muted)">No items purchased yet</p>')}s.addEventListener("click",d),i.addEventListener("click",t=>{t.target===i&&d()}),setInterval(l,1e3),function(){try{const t=localStorage.getItem(STORAGE_KEY);if(t){const e=JSON.parse(t);state.coins=e.coins??0,state.inventory=e.inventory??{},state.petEnchantments=e.petEnchantments??{},state.potionActive=e.potionActive??!1,state.potionEndsAt=e.potionEndsAt??0,state.luckStacks=e.luckStacks??0,state.purchasedItems=e.purchasedItems??[],state.potionInventory=e.potionInventory??[]}}catch(t){console.warn("load failed",t)}l()}()}}]);